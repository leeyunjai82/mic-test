<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>examplepage</title>
    <script>

    async function send()
   {
  writer.write("#AAA:BBB!");
  }
    async function start() 
    {
            // Prompt user to select any serial port.
            const port = await navigator.serial.requestPort();

            // Wait for the serial port to open.
            await port.open({ baudRate: 9600 });


const textDecoder = new TextDecoderStream();
const readableStreamClosed = port.readable.pipeTo(textDecoder.writable);
const writableStreamClosed = textEncoder.readable.pipeTo(port.writable);
const reader = textDecoder.readable.getReader();
const writer = textEncoder.writable.getWriter();
     
// 직렬 장치에서 오는 데이터를 듣는다.
while (true) {
  const { value, done } = await reader.read();
  if (done) {
    // 나중에 시리얼 포트가 닫힐 수 있도록 해준다.
    reader.releaseLock();
    break;
  }
  console.log(value);
}
      
    }
    
    if ("serial" in navigator) {
  alert("Your browser supports Web Serial API!");
}
    else {alert("Your browser does not support Web Serial API, the latest version of Google Chrome is recommended!");};


      
    </script>
  </head>
  <body>
   <button onclick="start()">Click me</button>
   <button onclick="send()">Send</button>
  </body>
</html>
